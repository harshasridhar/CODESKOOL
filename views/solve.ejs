<html>
    <head>
        <title>Solve Problem Page</title>
        <style>
            /* Split the screen in half */
            .split {
            height: 100%;
            /* width: 50%; */
            position: fixed;
            z-index: 1;
            top: 0;
            /* overflow-x: hidden; */
            padding-top: 20px;
            }

            /* Control the left side */
            .left {
            left: 0;
            width: 40%;
            background-color: rgb(174,174,174);
            overflow: auto;
            }

            /* Control the right side */
            .right {
            right: 0;
            width: 60%;
            overflow: scroll;
            background-color: white;
            }
        </style>
        <script type="text/javascript">
            var c = "#include<stdio.h>\nvoid main(){\n\t//Enter your code here\n\n}";
            var cpp = "include<iostream>\nusing namespace std;\nint main(){\n\t//Enter your code here\n\n}";
            var java = "import java.io.*;\npublic class Main{\n\tpublic static void main(String[] args){\n\t//Enter your code here\n\n\t}\n}";
            var python3 = "#Enter your code here\n"
            function changeLang(){
                var language = document.getElementById('language').value;
                var r = confirm("Language will be changed and all the previous changes will be lost");
                if(r == true){
                    if(language == 'C'){
                        document.getElementById('language').value="C";
                        document.getElementById('code').innerHTML = c;
                    }
                    else if(language == 'C++'){
                        document.getElementById('language').value="C++";
                        document.getElementById('code').innerHTML = cpp;
                    }
                    else if(language == 'Java'){
                        document.getElementById('language').value="Java";
                        document.getElementById('code').innerHTML = java;
                    }
                    else if(language == 'Python3'){
                        document.getElementById('language').value="Python3";
                        document.getElementById('code').innerHTML = python3;
                    }
                }
                else{
                    alert('Language not changed');
                }
            }
            function enableTab(id) {
              var el = document.getElementById(id);
              el.onkeydown = function(e) {
                  if (e.keyCode === 9) { // tab was pressed

                    // get caret position/selection
                    var val = this.value,
                        start = this.selectionStart,
                        end = this.selectionEnd;

                    // set textarea value to: text before caret + tab + text after caret
                    this.value = val.substring(0, start) + '\t' + val.substring(end);

                    // put caret at right position again
                    this.selectionStart = this.selectionEnd = start + 1;

                    // prevent the focus lose
                    return false;

                }
              };
            }
            function btnclick(){
                document.getElementById("output").innerHTML="Loading...";
            }
        </script>
    </head>
    <body id="b">
        <div class="split left">
            <h2>Problem Statement</h2>
            <%= docs.pstatement %>
            <h2>Constraints</h2>
            <% if(docs.constraints == '') { %>
                No constraints
            <% } %>
            <% if(docs.constraints != '') { %>
                <%= docs.constraints %>
            <% } %>
            <h2>Test Cases</h2>
            <% if(docs.test_cases == null){ %>
                No Test cases
            <%}%>
            <% if(docs.test_cases != null) { %>
                Number of Test Cases: <%= docs.test_cases %> <br>
                Sample input: <pre><%= docs.inp[0] %></pre> <br>
                Sample ouput: <pre><%= docs.out[0] %></pre>
            <% } %>
        </div>
        <div class="split right">
            <% if (code !='') { var c = code;%>
                <p id="cod" hidden><%=code%></p>
            <% } %>
            <% if (input !='') {%>
                <p id="inp" hidden><%=input%></p>
            <% } %>
            <% if (output !='') {%>
                <p id="out" hidden><%=output%></p>
            <% } %>
            <% if (stderr !='') {%>
                <p id="out" hidden><%=stderr%></p>
            <% } %>
            <h2>Code</h2>
            Select the language:
            <form action="compile" method="post">
                <input type="text" name="doc_id" value='<%=docs._id%>' hidden>
              <select id="language" name="language" onchange="changeLang()">
                  <option value="C" <% if( lang!= '' && lang == 'C'){%> selected<%}%>>C</option>
                  <option value="C++" <% if( lang!= '' && lang == 'C++'){%> selected<%}%>>C++</option>
                  <option value="Java" <% if( lang!= '' && lang == 'Java'){%> selected<%}%>>Java</option>
                  <option value="Python3" <% if( lang!= '' && lang == 'Python3'){%> selected<%}%>>Python3</option>
              </select><br>
              <textarea id="code" name="code"  cols="80" rows="40" style="resize:none" value="<%if (code!=''){ %><%=code%><%}%>"><%=code%></textarea>
              <script> document.getElementById("code").innerHTML=c; enableTab('code');</script>
              <h3>Input</h3>
              <textarea id="input" name="input" cols="30" rows="10" placeholder="Enter the input to your program here..." style="resize:none" value="<%if (input!=''){ %><%input%><%}%>"></textarea>
              <br><input type="submit" id="cnr" value="Compile and Run" onClick="btnclick()">
              &nbsp; &nbsp; <input type="submit" id="sub" value="Submit Code">
              <h3>Output</h3>
              <textarea id="output" name="ouput" cols="70" rows="10" placeholder="Output will be displayed here" style="resize:none" readonly value="<%if (output!=''){ %><%=output%><%}%>"></textarea>
          </form>
            <script>document.getElementById("code").innerHTML=document.getElementById("cod").textContent;</script>
            <script>document.getElementById("input").innerHTML=document.getElementById("inp").textContent;</script>
            <script>document.getElementById("output").innerHTML=document.getElementById("out").textContent;</script>
            
        </div>
    </body>
</html>
